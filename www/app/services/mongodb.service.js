(function(angular){
	angular.module('mongodb-service', [])
	.service('mongodbService', mongodbService);

	mongodbService.$inject = ['$http', '$q', '$timeout'];
	function mongodbService($http, $q, $timeout) {
		var mongoEndpoint = "http://198.199.67.144:3000/";
		/* 
		 * http://adrianmejia.com/blog/2014/10/01/creating-a-restful-api-tutorial-with-nodejs-and-mongodb/
		 * Look into:
		 *  - ExpressJS
		 *  - MongoDB
		 */

		var service = {
			saveRecord : function(record) {
				return save(record);
			},
			getAllRecords : function() {
				return getAll();
			},
			getRecordByName : function(name) {
				return getByName();
			}
		};

		return service;

		function save(record) {
			var deferred = $q.defer();

			var url = "http://localhost:1337/198.199.67.144:3000/" 
				+ "?name=" + "OB Test"
				+ "&lift=" + record.lift 
				+ "&weight=" + record.weight
				+ "&velocities=" + record.velocities.toString()
				+ "&RPE=" + record.rpe;
			
			$http({
				url : url,
				method : "GET",
			})
			.then(function(data) {
				deferred.resolve("Created record.");
			},
			function(data) {
				deferred.reject("Failed to create record.");
			});

			return deferred.promise;
		}	

		function getAll() {
			var deferred = $q.defer();

			var url = "http://localhost:1337/198.199.67.144:3000/getRecords";
			
			/*
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				// if done and OK status
				if (xhttp.readyState == 4 && xhttp.status == 200) {
					var jsonObj = getJSONObject(xhttp.responseText);
					deferred.resolve(jsonObj);
				}
				// if done and not OK status
				else if (xhttp.readyState == 4 && xhttp.status != 200) {
					deferred.reject();
				}
			};
			
			xhttp.open("GET", url, true);
			xhttp.send();
			 */
			
			var test = [{"_id":"56da5b3a166d35802fc0075e","date":"2016:03:04:23:06:17","name":"Jordan Berke","lift":"squat","weight":"336","velocities":[0.37,0.34,0.31,0.29,0.29,0.26,0.26,0.19],"RPE":"9"},{"_id":"56da6de7edbd917c3ed37607","date":"2016:03:05:00:25:52","name":"Jordan Berke","lift":"squat","weight":"336","velocities":[0.37,0.34,0.31,0.29,0.29,0.26,0.26,0.19],"RPE":"9"},{"_id":"56da6e1eedbd917c3ed37608","date":"2016:03:05:00:26:53","name":"Jordan Berke","lift":"bench","weight":"290","velocities":[0.36,0.34,0.31,0.29,0.29,0.26,0.26,0.19],"RPE":"9"},{"_id":"56db00af483f974d4968f439","date":"2016:03:05:10:52:14","name":"Jordan Berke","lift":"bench","weight":"290","velocities":[0.36,0.34,0.31,0.29,0.29,0.26,0.26,0.19],"RPE":"10"},{"_id":"56db02a4fc41a97e4964af58","date":"2016:03:05:11:00:36","name":"Jordan Berke","lift":"bench","weight":"290","velocities":[0.36,0.34,0.31,0.29,0.29,0.26,0.26,0.19],"RPE":"7"},{"_id":"56db05f776d4e1ae0243cef4","date":"2016:03:05:11:14:43","name":"Jordan Berke","lift":"bench","weight":"296","velocities":[0.36,0.34,0.31,0.29,0.29,0.26,0.26,0.19],"RPE":"7"},{"_id":"56db225276d4e1ae0243cef5","date":"2016:03:05:13:15:46","name":"\"Kendra Garwin\"","lift":"\"deadlift\"","weight":"295","velocities":[0.12],"RPE":"9"},{"_id":"56db228676d4e1ae0243cef6","date":"2016:03:05:13:16:38","name":"Kendra Garwin","lift":"deadlift","weight":"295","velocities":[0.11],"RPE":null},{"_id":"56db236976d4e1ae0243cef7","date":"2016:03:05:13:20:25","name":"Kendra Garwin","lift":"deadlift","weight":"135","velocities":[0.33],"RPE":"9"},{"_id":"56db236a76d4e1ae0243cef8","date":"2016:03:05:13:20:25","name":"Kendra Garwin","lift":"deadlift","weight":"135","velocities":[0.35],"RPE":"9"},{"_id":"56db236a76d4e1ae0243cef9","date":"2016:03:05:13:20:25","name":"Kendra Garwin","lift":"deadlift","weight":"135","velocities":[0.47],"RPE":"9"},{"_id":"56db236a76d4e1ae0243cefa","date":"2016:03:05:13:20:25","name":"Kendra Garwin","lift":"deadlift","weight":"135","velocities":[0.37],"RPE":"9"},{"_id":"56db236a76d4e1ae0243cefb","date":"2016:03:05:13:20:26","name":"Kendra Garwin","lift":"deadlift","weight":"135","velocities":[0.5],"RPE":"9"},{"_id":"56db236b76d4e1ae0243cefc","date":"2016:03:05:13:20:26","name":"Kendra Garwin","lift":"deadlift","weight":"185","velocities":[0.29],"RPE":"9"},{"_id":"56db236b76d4e1ae0243cefd","date":"2016:03:05:13:20:26","name":"Kendra Garwin","lift":"deadlift","weight":"185","velocities":[0.27],"RPE":"9"},{"_id":"56db236b76d4e1ae0243cefe","date":"2016:03:05:13:20:27","name":"Kendra Garwin","lift":"deadlift","weight":"185","velocities":[0.29],"RPE":"9"},{"_id":"56db236b76d4e1ae0243ceff","date":"2016:03:05:13:20:27","name":"Kendra Garwin","lift":"deadlift","weight":"185","velocities":[0.34],"RPE":"9"},{"_id":"56db236b76d4e1ae0243cf00","date":"2016:03:05:13:20:27","name":"Kendra Garwin","lift":"deadlift","weight":"185","velocities":[0.32],"RPE":"9"},{"_id":"56db236c76d4e1ae0243cf01","date":"2016:03:05:13:20:27","name":"Kendra Garwin","lift":"deadlift","weight":"225","velocities":[0.26],"RPE":"9"},{"_id":"56db236c76d4e1ae0243cf02","date":"2016:03:05:13:20:28","name":"Kendra Garwin","lift":"deadlift","weight":"225","velocities":[0.32],"RPE":"9"},{"_id":"56db236c76d4e1ae0243cf03","date":"2016:03:05:13:20:27","name":"Kendra Garwin","lift":"deadlift","weight":"225","velocities":[0.35],"RPE":"9"},{"_id":"56db236c76d4e1ae0243cf04","date":"2016:03:05:13:20:28","name":"Kendra Garwin","lift":"deadlift","weight":"275","velocities":[0.21],"RPE":"9"},{"_id":"56db236c76d4e1ae0243cf05","date":"2016:03:05:13:20:28","name":"Kendra Garwin","lift":"deadlift","weight":"275","velocities":[0.23],"RPE":"9"},{"_id":"56db236d76d4e1ae0243cf06","date":"2016:03:05:13:20:28","name":"Kendra Garwin","lift":"deadlift","weight":"305","velocities":[0.14],"RPE":"9"},{"_id":"56db236d76d4e1ae0243cf07","date":"2016:03:05:13:20:28","name":"Kendra Garwin","lift":"deadlift","weight":"305","velocities":[0.16],"RPE":"9"},{"_id":"56db236d76d4e1ae0243cf08","date":"2016:03:05:13:20:29","name":"Kendra Garwin","lift":"deadlift","weight":"305","velocities":[0.1],"RPE":"9"},{"_id":"56db236d76d4e1ae0243cf09","date":"2016:03:05:13:20:29","name":"Kendra Garwin","lift":"deadlift","weight":"305","velocities":[0.13],"RPE":"9"},{"_id":"56db236d76d4e1ae0243cf0a","date":"2016:03:05:13:20:29","name":"Kendra Garwin","lift":"deadlift","weight":"305","velocities":[0.1],"RPE":"9"},{"_id":"56db236e76d4e1ae0243cf0b","date":"2016:03:05:13:20:29","name":"Kendra Garwin","lift":"deadlift","weight":"305","velocities":[0.12],"RPE":"9"},{"_id":"56db236e76d4e1ae0243cf0c","date":"2016:03:05:13:20:29","name":"Kendra Garwin","lift":"deadlift","weight":"305","velocities":[0.09],"RPE":"9"},{"_id":"56db236e76d4e1ae0243cf0d","date":"2016:03:05:13:20:30","name":"Kendra Garwin","lift":"deadlift","weight":"295","velocities":[0.12],"RPE":"9"},{"_id":"56db236e76d4e1ae0243cf0e","date":"2016:03:05:13:20:30","name":"Kendra Garwin","lift":"deadlift","weight":"295","velocities":[0.09],"RPE":"9"},{"_id":"56db236f76d4e1ae0243cf0f","date":"2016:03:05:13:20:30","name":"Kendra Garwin","lift":"deadlift","weight":"295","velocities":[0.13],"RPE":"9"},{"_id":"56db236f76d4e1ae0243cf10","date":"2016:03:05:13:20:30","name":"Kendra Garwin","lift":"deadlift","weight":"295","velocities":[0.12],"RPE":"9"},{"_id":"56db236f76d4e1ae0243cf11","date":"2016:03:05:13:20:30","name":"Kendra Garwin","lift":"deadlift","weight":"295","velocities":[0.09],"RPE":"9"},{"_id":"56db236f76d4e1ae0243cf12","date":"2016:03:05:13:20:31","name":"Kendra Garwin","lift":"deadlift","weight":"295","velocities":[0.12],"RPE":"9"},{"_id":"56db236f76d4e1ae0243cf13","date":"2016:03:05:13:20:31","name":"Kendra Garwin","lift":"deadlift","weight":"295","velocities":[0.1],"RPE":"9"},{"_id":"56db236f76d4e1ae0243cf14","date":"2016:03:05:13:20:31","name":"Kendra Garwin","lift":"deadlift","weight":"295","velocities":[0.1],"RPE":"9"},{"_id":"56db237076d4e1ae0243cf15","date":"2016:03:05:13:20:31","name":"Kendra Garwin","lift":"deadlift","weight":"295","velocities":[0.11],"RPE":"9"},{"_id":"56ef4573dfc8a5460bcfa627","date":"2016:03:20:20:50:59","name":"OB Test","lift":"Squat","weight":"315","velocities":[0.5,0.5,0.5],"RPE":"8"},{"_id":"56ef458ddfc8a5460bcfa628","date":"2016:03:20:20:51:24","name":"OB Test","lift":"Squat","weight":"315","velocities":[0.5,0.5,0.5],"RPE":"8"},{"_id":"56ef45a2dfc8a5460bcfa629","date":"2016:03:20:20:51:45","name":"OB Test","lift":"Squat","weight":"315","velocities":[0.5,0.5,0.5],"RPE":"8"},{"_id":"56ef499edfc8a5460bcfa62a","date":"2016:03:20:21:08:46","name":"OB Test","lift":"Squat","weight":"315","velocities":[0.5,0.5,0.5],"RPE":"8"},{"_id":"56ef4e1edfc8a5460bcfa62b","date":"2016:03:20:21:27:58","name":"OB Test","lift":"Squat","weight":"315","velocities":[0.5,0.5,0.5],"RPE":"8"},{"_id":"56ef4e45dfc8a5460bcfa62c","date":"2016:03:20:21:28:37","name":"OB Test","lift":"Squat","weight":"315","velocities":[0.5,0.5,0.5],"RPE":"8"},{"_id":"56f1bca5dfc8a5460bcfa62d","date":"2016:03:22:17:44:04","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[1.26,1.69,1.62,1.44,1.43,1.52,1.46,1.44],"RPE":"undefined"},{"_id":"56f1c2f5dfc8a5460bcfa62e","date":"2016:03:22:18:11:01","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[0.85,0.74,0.76],"RPE":"undefined"},{"_id":"56f1c3fddfc8a5460bcfa62f","date":"2016:03:22:18:15:17","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[0.72,0.72,0.67,0.69,0.81,0.71,0.63,0.62],"RPE":"undefined"},{"_id":"56f1de9ddfc8a5460bcfa630","date":"2016:03:22:20:09:01","name":"OB Test","lift":"Set 2","weight":"undefined","velocities":[0.51,0.56,0.56,0.53,0.76],"RPE":"undefined"},{"_id":"56f1df70dfc8a5460bcfa631","date":"2016:03:22:20:12:32","name":"OB Test","lift":"Set 3","weight":"undefined","velocities":[0.51,0.6,0.59,0.61,0.59],"RPE":"undefined"},{"_id":"56f1e029dfc8a5460bcfa632","date":"2016:03:22:20:15:37","name":"OB Test","lift":"Set 4","weight":"undefined","velocities":[0.52,0.53,0.54],"RPE":"undefined"},{"_id":"56f1e0bddfc8a5460bcfa633","date":"2016:03:22:20:18:05","name":"OB Test","lift":"Set 5","weight":"undefined","velocities":[0.43,0.43,0.43],"RPE":"undefined"},{"_id":"56f1e164dfc8a5460bcfa634","date":"2016:03:22:20:20:52","name":"OB Test","lift":"Set 6","weight":"undefined","velocities":[0.36,0.37,0.38],"RPE":"undefined"},{"_id":"56f1e236dfc8a5460bcfa635","date":"2016:03:22:20:24:22","name":"OB Test","lift":"Set 7","weight":"undefined","velocities":[0.34,0.31,0.35],"RPE":"undefined"},{"_id":"56f1e2f8dfc8a5460bcfa636","date":"2016:03:22:20:27:35","name":"OB Test","lift":"Set 8","weight":"undefined","velocities":[0.3,0.25,0.28],"RPE":"undefined"},{"_id":"56f1e37adfc8a5460bcfa637","date":"2016:03:22:20:29:46","name":"OB Test","lift":"Set 9","weight":"undefined","velocities":[0.28,0.29,0.28],"RPE":"undefined"},{"_id":"56f1e3fedfc8a5460bcfa638","date":"2016:03:22:20:31:58","name":"OB Test","lift":"Set 10","weight":"undefined","velocities":[0.37,0.31,0.28],"RPE":"undefined"},{"_id":"56f1e47ddfc8a5460bcfa639","date":"2016:03:22:20:34:05","name":"OB Test","lift":"Set 11","weight":"undefined","velocities":[0.22,0.27,0.21],"RPE":"undefined"},{"_id":"56f31755dfc8a5460bcfa63a","date":"2016:03:23:18:23:17","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[0.91,0.85,0.92,0.94],"RPE":"undefined"},{"_id":"56f317e7dfc8a5460bcfa63b","date":"2016:03:23:18:25:43","name":"OB Test","lift":"Squat","weight":"undefined","velocities":[0.91,0.85,0.92,0.94],"RPE":"undefined"},{"_id":"56f31861dfc8a5460bcfa63c","date":"2016:03:23:18:27:45","name":"OB Test","lift":"Squat","weight":"315","velocities":[0.91,0.85,0.92,0.94],"RPE":"9"},{"_id":"56f31d8cdfc8a5460bcfa63d","date":"2016:03:23:18:49:47","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[1.01,0.9,0.96],"RPE":"undefined"},{"_id":"56f31da8dfc8a5460bcfa63e","date":"2016:03:23:18:50:15","name":"OB Test","lift":"Squat","weight":"225","velocities":[1.01,0.9,0.96],"RPE":"undefined"},{"_id":"56f32512dfc8a5460bcfa63f","date":"2016:03:23:19:21:54","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[0.88,0.94,0.85,0.98,0.86,0.78,0.71],"RPE":"5"},{"_id":"56f32524dfc8a5460bcfa640","date":"2016:03:23:19:22:12","name":"OB Test","lift":"Deadlift","weight":"135","velocities":[0.88,0.94,0.85,0.98,0.86,0.78,0.71],"RPE":"5"},{"_id":"56f325d2dfc8a5460bcfa641","date":"2016:03:23:19:25:06","name":"OB Test","lift":"Set 2","weight":"undefined","velocities":[0.8,0.87,0.78,0.72,0.72],"RPE":"5"},{"_id":"56f325dbdfc8a5460bcfa642","date":"2016:03:23:19:25:14","name":"OB Test","lift":"Deadlift","weight":"185","velocities":[0.8,0.87,0.78,0.72,0.72],"RPE":"5"},{"_id":"56f32655dfc8a5460bcfa643","date":"2016:03:23:19:27:16","name":"OB Test","lift":"Set 3","weight":"undefined","velocities":[0.05],"RPE":"5"},{"_id":"56f326f0dfc8a5460bcfa644","date":"2016:03:23:19:29:52","name":"OB Test","lift":"Set 4","weight":"undefined","velocities":[0.71,0.72,0.73,0.71,0.7],"RPE":"5"},{"_id":"56f326f9dfc8a5460bcfa645","date":"2016:03:23:19:30:01","name":"OB Test","lift":"Deadlift","weight":"225","velocities":[0.71,0.72,0.73,0.71,0.7],"RPE":"5"},{"_id":"56f32817dfc8a5460bcfa646","date":"2016:03:23:19:34:47","name":"OB Test","lift":"Set 5","weight":"undefined","velocities":[0.72,0.71,0.69],"RPE":"5"},{"_id":"56f3281fdfc8a5460bcfa647","date":"2016:03:23:19:34:54","name":"OB Test","lift":"Deadlift","weight":"275","velocities":[0.72,0.71,0.69],"RPE":"5"},{"_id":"56f3282cdfc8a5460bcfa648","date":"2016:03:23:19:35:08","name":"OB Test","lift":"Deadlift (Belt on)","weight":"275","velocities":[0.72,0.71,0.69],"RPE":"5"},{"_id":"56f3292adfc8a5460bcfa649","date":"2016:03:23:19:39:22","name":"OB Test","lift":"Set 6","weight":"undefined","velocities":[0.59,0.57,0.53],"RPE":"5"},{"_id":"56f32930dfc8a5460bcfa64a","date":"2016:03:23:19:39:28","name":"OB Test","lift":"Deadlift (Belt on)","weight":"315","velocities":[0.59,0.57,0.53],"RPE":"5"},{"_id":"56f32a44dfc8a5460bcfa64b","date":"2016:03:23:19:44:04","name":"OB Test","lift":"Set 7","weight":"undefined","velocities":[0.48,0.48],"RPE":"5"},{"_id":"56f32bf0dfc8a5460bcfa64c","date":"2016:03:23:19:51:11","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[0.69],"RPE":"5"},{"_id":"56f32c1ddfc8a5460bcfa64d","date":"2016:03:23:19:51:56","name":"OB Test","lift":"Set 2","weight":"undefined","velocities":[0.67],"RPE":"5"},{"_id":"56f32c48dfc8a5460bcfa64e","date":"2016:03:23:19:52:39","name":"OB Test","lift":"Set 3","weight":"undefined","velocities":[0.63],"RPE":"5"},{"_id":"56f32c79dfc8a5460bcfa64f","date":"2016:03:23:19:53:28","name":"OB Test","lift":"Set 4","weight":"undefined","velocities":[0.55],"RPE":"5"},{"_id":"56f32ca3dfc8a5460bcfa650","date":"2016:03:23:19:54:11","name":"OB Test","lift":"Set 5","weight":"undefined","velocities":[0.64],"RPE":"5"},{"_id":"56f32ccfdfc8a5460bcfa651","date":"2016:03:23:19:54:54","name":"OB Test","lift":"Set 6","weight":"undefined","velocities":[0.56],"RPE":"5"},{"_id":"56f32cfbdfc8a5460bcfa652","date":"2016:03:23:19:55:38","name":"OB Test","lift":"Set 7","weight":"undefined","velocities":[0.68],"RPE":"5"},{"_id":"56f32d26dfc8a5460bcfa653","date":"2016:03:23:19:56:22","name":"OB Test","lift":"Set 8","weight":"undefined","velocities":[0.68],"RPE":"5"},{"_id":"56f32d50dfc8a5460bcfa654","date":"2016:03:23:19:57:04","name":"OB Test","lift":"Set 9","weight":"undefined","velocities":[0.53],"RPE":"5"},{"_id":"56f32d7ddfc8a5460bcfa655","date":"2016:03:23:19:57:49","name":"OB Test","lift":"Set 10","weight":"undefined","velocities":[0.59],"RPE":"5"},{"_id":"56f32da8dfc8a5460bcfa656","date":"2016:03:23:19:58:32","name":"OB Test","lift":"Set 11","weight":"undefined","velocities":[0.59],"RPE":"5"},{"_id":"56f32db6dfc8a5460bcfa657","date":"2016:03:23:19:58:46","name":"OB Test","lift":"Set 12","weight":"undefined","velocities":[0.72],"RPE":"5"},{"_id":"56f32edddfc8a5460bcfa658","date":"2016:03:23:20:03:40","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[0.66],"RPE":"5"},{"_id":"56f32f0adfc8a5460bcfa659","date":"2016:03:23:20:04:23","name":"OB Test","lift":"Set 2","weight":"undefined","velocities":[0.55],"RPE":"5"},{"_id":"56f32f34dfc8a5460bcfa65a","date":"2016:03:23:20:05:08","name":"OB Test","lift":"Set 3","weight":"undefined","velocities":[0.76],"RPE":"5"},{"_id":"56f32f60dfc8a5460bcfa65b","date":"2016:03:23:20:05:52","name":"OB Test","lift":"Set 4","weight":"undefined","velocities":[0.56],"RPE":"5"},{"_id":"56f32f8cdfc8a5460bcfa65c","date":"2016:03:23:20:06:36","name":"OB Test","lift":"Set 5","weight":"undefined","velocities":[0.73],"RPE":"5"},{"_id":"56f32fb8dfc8a5460bcfa65d","date":"2016:03:23:20:07:19","name":"OB Test","lift":"Set 6","weight":"undefined","velocities":[0.77],"RPE":"5"},{"_id":"56f32fe3dfc8a5460bcfa65e","date":"2016:03:23:20:08:02","name":"OB Test","lift":"Set 7","weight":"undefined","velocities":[0.72],"RPE":"5"},{"_id":"56f3300fdfc8a5460bcfa65f","date":"2016:03:23:20:08:46","name":"OB Test","lift":"Set 8","weight":"undefined","velocities":[0.71],"RPE":"5"},{"_id":"56f3303fdfc8a5460bcfa660","date":"2016:03:23:20:09:35","name":"OB Test","lift":"Set 9","weight":"undefined","velocities":[0.79],"RPE":"5"},{"_id":"56f3306bdfc8a5460bcfa661","date":"2016:03:23:20:10:18","name":"OB Test","lift":"Set 10","weight":"undefined","velocities":[0.62],"RPE":"5"},{"_id":"56f33095dfc8a5460bcfa662","date":"2016:03:23:20:11:00","name":"OB Test","lift":"Set 11","weight":"undefined","velocities":[0.76],"RPE":"5"},{"_id":"56f330a3dfc8a5460bcfa663","date":"2016:03:23:20:11:15","name":"OB Test","lift":"Set 12","weight":"undefined","velocities":[0.75],"RPE":"5"},{"_id":"56f331a1dfc8a5460bcfa664","date":"2016:03:23:20:15:28","name":"OB Test","lift":"Set 13","weight":"undefined","velocities":[0.35,0.31,0.35,0.18,0.26],"RPE":"5"},{"_id":"56f331d0dfc8a5460bcfa665","date":"2016:03:23:20:16:16","name":"OB Test","lift":"SLDL","weight":"275","velocities":[0.35,0.31,0.35,0.18,0.26],"RPE":"8"},{"_id":"56f33246dfc8a5460bcfa666","date":"2016:03:23:20:18:14","name":"OB Test","lift":"Set 14","weight":"undefined","velocities":[0.3,0.35,0.32,0.37,0.38],"RPE":"5"},{"_id":"56f3324ddfc8a5460bcfa667","date":"2016:03:23:20:18:20","name":"OB Test","lift":"SLDL","weight":"275","velocities":[0.3,0.35,0.32,0.37,0.38],"RPE":"8"},{"_id":"56f332e7dfc8a5460bcfa668","date":"2016:03:23:20:20:54","name":"OB Test","lift":"Set 15","weight":"undefined","velocities":[0.35,0.35,0.35,0.32,0.28],"RPE":"5"},{"_id":"56f332f4dfc8a5460bcfa669","date":"2016:03:23:20:21:07","name":"OB Test","lift":"SLDL","weight":"275","velocities":[0.35,0.35,0.35,0.32,0.28],"RPE":"9"},{"_id":"56f410dadfc8a5460bcfa66a","date":"2016:03:24:12:07:53","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[1.09,1.21,1.13,1.18,1.15,1.15,1.13,1.17,1.17,1.14],"RPE":"5"},{"_id":"56f411d1dfc8a5460bcfa66b","date":"2016:03:24:12:12:01","name":"OB Test","lift":"Set 2","weight":"undefined","velocities":[0.99,1.08,1.06,1.11,1.06,1.06,1.09,1.06],"RPE":"5"},{"_id":"56f412bfdfc8a5460bcfa66c","date":"2016:03:24:12:15:59","name":"OB Test","lift":"Set 3","weight":"undefined","velocities":[0.86,0.97,0.95,1,0.99],"RPE":"5"},{"_id":"56f41394dfc8a5460bcfa66d","date":"2016:03:24:12:19:27","name":"OB Test","lift":"Set 4","weight":"undefined","velocities":[0.85,0.85,0.82,0.84,0.83],"RPE":"5"},{"_id":"56f4148bdfc8a5460bcfa66e","date":"2016:03:24:12:23:37","name":"OB Test","lift":"Set 5","weight":"undefined","velocities":[0.75,0.77,0.73],"RPE":"5"},{"_id":"56f41550dfc8a5460bcfa66f","date":"2016:03:24:12:26:55","name":"OB Test","lift":"Set 6","weight":"undefined","velocities":[0.68,0.7,0.7],"RPE":"5"},{"_id":"56f41685dfc8a5460bcfa670","date":"2016:03:24:12:32:04","name":"OB Test","lift":"Set 7","weight":"undefined","velocities":[0.62,0.59],"RPE":"5"},{"_id":"56f418d5dfc8a5460bcfa671","date":"2016:03:24:12:41:53","name":"OB Test","lift":"Set 8","weight":"undefined","velocities":[0.55,0.58,0.59,0.55,0.5,0.49,0.42],"RPE":"5"},{"_id":"56f41a08dfc8a5460bcfa672","date":"2016:03:24:12:47:03","name":"OB Test","lift":"Set 9","weight":"undefined","velocities":[0.57,0.55,0.57,0.52,0.53,0.5,0.53,0.49],"RPE":"5"},{"_id":"56f41a5fdfc8a5460bcfa673","date":"2016:03:24:12:48:30","name":"OB Test","lift":"","weight":"","velocities":[0.57,0.55,0.57,0.52,0.53,0.5,0.53,0.49],"RPE":"5"},{"_id":"56f41a6edfc8a5460bcfa674","date":"2016:03:24:12:48:45","name":"OB Test","lift":"Squat","weight":"265","velocities":[0.57,0.55,0.57,0.52,0.53,0.5,0.53,0.49],"RPE":"9"},{"_id":"56f41bd3dfc8a5460bcfa675","date":"2016:03:24:12:54:42","name":"OB Test","lift":"Set 10","weight":"undefined","velocities":[0.6,0.57,0.5,0.52,0.49,0.47,0.44],"RPE":"5"},{"_id":"56f41d29dfc8a5460bcfa676","date":"2016:03:24:13:00:25","name":"OB Test","lift":"Set 11","weight":"undefined","velocities":[0.57,0.56,0.54,0.52,0.48,0.46,0.37],"RPE":"5"},{"_id":"56f421bedfc8a5460bcfa677","date":"2016:03:24:13:19:57","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[0.86,0.95,0.92,0.93,0.98,0.94,0.94,0.99,0.97],"RPE":"5"},{"_id":"56f4227cdfc8a5460bcfa678","date":"2016:03:24:13:23:06","name":"OB Test","lift":"Set 2","weight":"undefined","velocities":[0.68,0.66,0.7,0.76,0.77,0.79,0.84,0.8],"RPE":"5"},{"_id":"56f4237fdfc8a5460bcfa679","date":"2016:03:24:13:27:25","name":"OB Test","lift":"Set 3","weight":"undefined","velocities":[0.6,0.62,0.64,0.64,0.68,0.66],"RPE":"5"},{"_id":"56f424b9dfc8a5460bcfa67a","date":"2016:03:24:13:32:40","name":"OB Test","lift":"Set 4","weight":"undefined","velocities":[0.46,0.47,0.41,0.37],"RPE":"5"},{"_id":"56f425a9dfc8a5460bcfa67b","date":"2016:03:24:13:36:40","name":"OB Test","lift":"Set 5","weight":"undefined","velocities":[0.49,0.47,0.52,0.47,0.51,0.45,0.5,0.48],"RPE":"5"},{"_id":"56f425b9dfc8a5460bcfa67c","date":"2016:03:24:13:36:57","name":"OB Test","lift":"Bench","weight":"185","velocities":[0.49,0.47,0.52,0.47,0.51,0.45,0.5,0.48],"RPE":"8"},{"_id":"56f425c1dfc8a5460bcfa67d","date":"2016:03:24:13:37:05","name":"OB Test","lift":"Bench","weight":"185","velocities":[0.49,0.47,0.52,0.47,0.51,0.45,0.5,0.48],"RPE":"7"},{"_id":"56f42755dfc8a5460bcfa67e","date":"2016:03:24:13:43:49","name":"OB Test","lift":"Set 1","weight":"undefined","velocities":[0.47,0.49,0.48,0.5,0.48,0.47,0.45,0.49],"RPE":"5"},{"_id":"56f42762dfc8a5460bcfa67f","date":"2016:03:24:13:43:59","name":"OB Test","lift":"Bench","weight":"165","velocities":[0.47,0.49,0.48,0.5,0.48,0.47,0.45,0.49],"RPE":"7"},{"_id":"56f427efdfc8a5460bcfa680","date":"2016:03:24:13:46:22","name":"OB Test","lift":"Set 2","weight":"undefined","velocities":[0.47,0.48,0.49,0.48,0.43,0.39,0.41],"RPE":"5"},{"_id":"56f427f6dfc8a5460bcfa681","date":"2016:03:24:13:46:28","name":"OB Test","lift":"Bench","weight":"165","velocities":[0.47,0.48,0.49,0.48,0.43,0.39,0.41],"RPE":"7"},{"_id":"56f49d69a812ce88324235e8","date":"2016:03:24:22:07:36","user":"abc","set":"3","time":"2016-03-24-11:46:01","rep":[{"n":2,"velocity":0.46},{"n":3,"velocity":0.5},{"n":4,"velocity":0.99}]},{"_id":"56f736ddf1ed22303a1a2a6b","date":"2016:03:26:21:26:52","user":"abcxyz","set":"23","time":"2016-03-24-11:46:01","rep":[{"n":3,"velocity":0.46},{"n":4,"velocity":0.5},{"n":5,"velocity":0.99}]},{"_id":"56f736dff1ed22303a1a2a6c","date":"2016:03:26:21:26:54","user":"abcxyz","set":"23","time":"2016-03-24-11:46:01","rep":[{"n":3,"velocity":0.46},{"n":4,"velocity":0.5},{"n":5,"velocity":0.99}]},{"_id":"56f736e0f1ed22303a1a2a6d","date":"2016:03:26:21:26:55","user":"abcxyz","set":"23","time":"2016-03-24-11:46:01","rep":[{"n":3,"velocity":0.46},{"n":4,"velocity":0.5},{"n":5,"velocity":0.99}]},{"_id":"56f7ef9bbfadb5b820e92057","date":"2016:03:27:10:35:06","user":"ab","set":"456","lift":"other","RPE":"8","rep":[{"n":2,"velocity":4},{"n":3,"velocity":5},{"n":4,"velocity":6},{"n":5,"velocity":7}]},{"_id":"56f927daa69f9ac41ef22bfe","date":"2016:03:28:11:08:52","user":"abc","set":"23","time":"2016-03-24-11:46:01","RPE":"9","rep":[{"n":3,"velocity":0.46},{"n":4,"velocity":0.5},{"n":5,"velocity":0.99}],"extra":"something"},{"_id":"56f94a0a84e257ed53f82c4e","set":"23","time":"2016-03-24-11:46:01","user":"ijk","date":"2016:03:28:11:14:24","lift":"bench","RPE":"2","rep":[{"n":3,"velocity":1.46},{"n":4,"velocity":1.5},{"n":5,"velocity":0.99}]},{"_id":"56f94ab584e257ed53f82c4f","set":"34","time":"2016-03-24-11:46:01","user":"ijk","date":"2016:03:28:16:17:24","lift":"bench","RPE":"2","rep":[{"n":3,"velocity":1.46},{"n":4,"velocity":1.5},{"n":5,"velocity":0.99}]},{"_id":"56f990f784e257ed53f82c53","rep":{"n":"(+i + start)"},"set":"34","time":"2016-03-24-11:46:01","user":"ijk","date":"2016:03:28:16:15:21","lift":"bench","RPE":"2"},{"_id":"56f991cf84e257ed53f82c54","rep":{"n":"\"5\""},"set":"34","time":"2016-03-24-11:46:01","user":"ijk","date":"2016:03:28:16:18:49","lift":"bench","RPE":"2"}];
			deferred.resolve(test);
			/*
			 * $http automatically attempts to convert responses to JSON objects
			 * but does not work since the response needs to be altered to be JSON ready
			$http({
				url : url,
				method : "GET",
			})
			.then(function(records) {
				deferred.resolve(records);
			},
			function(data) {
				deferred.reject("Failed to create record.");
			});
			 */

			return deferred.promise;
		}
		
		function getJSONObject(response) {
			/* Add commas in between set records */
			var commaSeparated = response.replace(/}{/g, "},{");
			
			/* Remove any double quotes (ex ""Some Text"") */
			var extraQuotesRemoved = commaSeparated.replace(/""/g, "\"");
			
			/* Add array bracket to beginning */
			var arrayBegin = [extraQuotesRemoved.slice(0, 0), '[', extraQuotesRemoved.slice(0)].join('');
			
			/* Add array bracker to end */
			var arrayEnd = [arrayBegin.slice(0, arrayBegin.length), ']', arrayBegin.slice(arrayBegin.length)].join('');
			
			/* parse to JSON object */
			return JSON.parse(arrayEnd);
		}
	};
})(angular);
